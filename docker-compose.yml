version: '3'

services: 
    client-1: 
        container_name: "dimutex_1"
        image: dimutex:latest
        build: 
            dockerfile: ./Dockerfile
        environment: 
            - ADVERTISE_ADDR=172.17.0.2
            - NAME="Henning"
            - ID = "1"
            - PORT = "8080"
        ports: 
            - "8080:8080"    
    client-2: 
        container_name: "dimutex_2"
        image: dimutex:latest
        build: 
            dockerfile: ./Dockerfile
        environment: 
            - ADVERTISE_ADDR=172.17.0.3
            - CLUSTER_ADDR=172.17.0.2
            - NAME="Mikki"
            - ID = "2"
            - PORT = "8081"
        ports: 
            - "8081:8080"    
    client-3: 
        container_name: "dimutex_3"
        image: dimutex:latest
        build: 
            dockerfile: ./Dockerfile
        environment: 
            - ADVERTISE_ADDR=172.17.0.4
            - CLUSTER_ADDR=172.17.0.2
            - NAME="Jens"
            - ID = "3"   
            - PORT = "8082"
        ports: 
            - "8082:8080"     
    client-4: 
        container_name: "dimutex_4"
        image: dimutex:latest
        build: 
            dockerfile: ./Dockerfile
        environment: 
            - ADVERTISE_ADDR=172.17.0.5
            - CLUSTER_ADDR=172.17.0.2
            - NAME="BÃ¸rge"        
            - ID = "4"
            - PORT = "8083"
        ports: 
            - "8083:8080"    